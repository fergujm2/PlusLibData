<PlusConfiguration version="2.1">
  <DataCollection StartupDelaySec="1.0">
    <DeviceSet 
      Name="PlusServer: Tracking the da Vinci robot using OpenIGTLink and the da Vinci API" 
      Description="Test broadcasting tool tracking data through TCP/IP connection and ISI API."
    />
    <Device
      Id="TrackerDevice"
      Type="IntuitiveDaVinci" 
      ToolReferenceFrame="Base"
	  AcquisitionRate="60"
	  
	  Psm1DhTable = "
		1.0 	0.0		SHP		CHP		0.0			SHP		CHP
		1.0		0.0 	SNHP	CNHP	0.0			SNHP	CNHP
		2.0		0.0		SHP		CHP		-479.313	SZ		CZ
		1.0		0.0		SZ		CZ		467.000		SZ		CZ
		1.0		0.0		SNHP	CNHP	0.0			SNHP	CNHP
		1.0		8.9916	SNHP	CNHP	0.0			SNHP	CNHP
		0.0		0.0		SNHP	CNHP	9.652		SZ		CZ"
		
	  Psm2DhTable = "
		1.0 	0.0		SHP		CHP		0.0			SHP		CHP
		1.0		0.0 	SNHP	CNHP	0.0			SNHP	CNHP
		2.0		0.0		SHP		CHP		-479.313	SZ		CZ
		1.0		0.0		SZ		CZ		467.000		SZ		CZ
		1.0		0.0		SNHP	CNHP	0.0			SNHP	CNHP
		1.0		8.9916	SNHP	CNHP	0.0			SNHP	CNHP
		0.0		0.0		SNHP	CNHP	9.652		SZ		CZ"
		
	  EcmDhTable = "
		1.0		0.0		SHP		CHP		0.0			SHP		CHP
		1.0		0.0		SNHP	CNHP	0.0			SNHP	CNHP
		2.0		0.0		SHP		CHP		-382.2		SZ		CZ
		1.0		0.0		SZ		CZ		382.9		SP		CP
		0.0		0.0		SNHP	CNHP	0.0			SNHP	CNHP
		0.0		0.0		SNHP	CNHP	0.0			SNHP	CNHP
		0.0		0.0		SNHP	CNHP	0.0			SZ		CZ"
	  
	  Password="">
      <DataSources>
        <DataSource Type="Tool" Id="PSM1Tip" PortName="PSM1Tip"/>
        <DataSource Type="Tool" Id="PSM2Tip" PortName="PSM2Tip"/>
      </DataSources>
      <OutputChannels>
        <OutputChannel Id="TrackerStream" >
          <DataSource  Id="PSM1Tip" />
          <DataSource  Id="PSM2Tip" />
        </OutputChannel>
      </OutputChannels>
    </Device>

    <Device
      Id="CaptureDevice"
      Type="VirtualCapture"
      BaseFilename="RecordingTest.igs.mha"
      EnableCapturingOnStart="FALSE" >
      <InputChannels>
        <InputChannel Id="TrackerStream" />
      </InputChannels>
    </Device>    
  </DataCollection>
  
    <PlusOpenIGTLinkServer
        MaxNumberOfIgtlMessagesToSend="10"
        MaxTimeSpentWithProcessingMs="50"
        ListeningPort="18944"
        SendValidTransformsOnly="true"
        OutputChannelId="TrackerStream" >
        <DefaultClientInfo>
			<MessageTypes>
				<Message Type="TRANSFORM" />
			</MessageTypes>
			<TransformNames>
				<Transform Name="PSM1TipToBase" />
				<Transform Name="PSM2TipToBase" />
			</TransformNames>
        </DefaultClientInfo>
    </PlusOpenIGTLinkServer>

</PlusConfiguration>
